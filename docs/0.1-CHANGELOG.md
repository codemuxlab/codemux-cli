# CodeMux 0.1 Changelog

## Version 0.1.0 - Server-Client Architecture

### üöÄ Major Changes

#### Server-Client Architecture
- **NEW**: tmux-like server-client model for session management
- **BREAKING**: `codemux daemon` renamed to `codemux server`
- **NEW**: Sessions persist when clients disconnect and can be reattached
- **NEW**: Multiple clients can connect to the same session simultaneously
- **NEW**: Single server instance manages all sessions and web serving

#### Enhanced Session Management
- **NEW**: `codemux attach <session-id>` - attach to existing session
- **NEW**: `codemux kill-session <session-id>` - terminate specific session  
- **NEW**: `codemux server status` - show server status and running sessions
- **NEW**: Auto-start server when running `codemux run` if not already running
- **IMPROVED**: `codemux list` now shows all active sessions across projects

#### Unified Web Interface
- **CHANGED**: Single web server at `http://localhost:8765` serves all sessions
- **REMOVED**: Individual web servers per `codemux run` session
- **NEW**: Session switching in web interface
- **IMPROVED**: Better resource efficiency with shared web server

### ‚ú® New Features

#### Session Persistence
- Sessions continue running in background when client disconnects
- Full session state preserved including terminal buffer and cursor position
- Seamless reattachment with complete history

#### Multi-Client Support
- Multiple terminal clients can attach to same session
- Real-time synchronization between clients
- Collaborative coding workflows supported

#### Enhanced Project Management
- Projects now integrate with persistent sessions
- Better organization of sessions by project
- Improved session-to-project associations

### üîß Improvements

#### Performance
- Reduced memory usage with single server process
- Faster session startup (server already running)
- Optimized WebSocket communication
- Better resource sharing between sessions

#### User Experience
- Familiar tmux-like workflow for session management
- Auto-discovery and startup of server process
- Consistent port usage (default 8765 for server)
- Better error messages and status reporting

#### Development Experience
- Simplified architecture reduces complexity
- Better debugging with centralized logging
- More predictable session lifecycle
- Enhanced API for programmatic access

### üõ†Ô∏è Configuration Changes

#### Server Configuration
```toml
# Old (0.0.x)
[daemon]
port = 8765
data_dir = "~/.local/share/codemux"
pid_file = "~/.local/share/codemux/daemon.pid"

# New (0.1.x) - Auto-migrated
[server]
port = 8765
data_dir = "~/.local/share/codemux"  
pid_file = "~/.local/share/codemux/server.pid"
```

### üîÑ Migration

#### Backward Compatibility
- `codemux run claude` continues to work (now uses server internally)
- Existing configuration files automatically migrated
- All AI agent integrations preserved
- Web interface URLs remain functional

#### Breaking Changes
- `codemux daemon` ‚Üí `codemux server` (old command deprecated)
- Sessions are now persistent by default
- Default port changed from per-session (8765+) to server-wide (8765)
- Multiple sessions share single web interface

### üìö Documentation

#### New Documentation
- **NEW**: [0.1 Architecture Guide](./0.1-ARCHITECTURE.md) - Complete architecture overview
- **NEW**: [0.1 Migration Guide](./0.1-MIGRATION-GUIDE.md) - Detailed migration instructions  
- **NEW**: [0.1 API Documentation](./0.1-API.md) - Complete API reference
- **UPDATED**: README with new server-client usage patterns

### üîÆ What's Next (0.2.x)

#### Planned Features
- **Session Templates**: Predefined session configurations
- **Named Sessions**: Human-readable session names instead of UUIDs
- **Session Groups**: Logical grouping of related sessions
- **Remote Access**: Secure remote server connections
- **Session Sharing**: Share sessions with team members
- **Enhanced Web UI**: Improved mobile interface and session management

#### Additional Agents
- Full support for Gemini, Aider, Cursor, and Continue CLIs
- Agent-specific optimizations and features
- Custom agent configuration and whitelisting

### üêõ Bug Fixes

- Fixed session cleanup on server shutdown
- Improved WebSocket connection stability
- Better error handling for failed agent startups
- Resolved PTY sizing issues in web interface
- Fixed session state synchronization edge cases

### ‚ö†Ô∏è Known Issues

- Sessions from 0.0.x are not automatically recovered (expected)
- Initial server startup may take a few seconds
- Web interface requires manual refresh if server restarts
- Some edge cases in multi-client cursor synchronization

### üíî Deprecated Features

- `codemux daemon` command (use `codemux server`)
- Per-session web servers (now unified)
- Isolated session mode (all sessions managed by server)

### üèóÔ∏è Internal Changes

#### Architecture
- Refactored session management to use centralized SessionManager
- Unified web server implementation
- Improved channel-based communication between components
- Better separation of client and server concerns

#### Development
- Enhanced testing framework for server-client scenarios
- Improved CI/CD pipeline for release management
- Better development tooling and documentation
- Standardized error handling and logging

---

## Upgrading to 0.1.0

### Quick Upgrade
```bash
# Stop any running 0.0.x daemon
codemux stop

# Upgrade binary (method depends on installation)
brew upgrade codemux  # or npm update -g codemux

# Start using new commands
codemux run claude    # Will auto-start server and create session
```

### Full Migration
See the [Migration Guide](./0.1-MIGRATION-GUIDE.md) for detailed migration instructions and troubleshooting.

---

This release represents a significant architectural improvement that makes CodeMux more powerful, efficient, and user-friendly while maintaining backward compatibility for existing workflows.